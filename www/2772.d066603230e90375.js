"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2772],{2772:(bt,D,m)=>{m.r(D),m.d(D,{ShipmentPageModule:()=>xt});var v=m(177),S=m(9417),d=m(9893),P=m(9315),_=m(467),w=m(8199);class E{constructor(i,e,n,s){if(isNaN(i)||isNaN(e))throw new Error(`Point is invalid: (${i}, ${e})`);this.x=+i,this.y=+e,this.pressure=n||0,this.time=s||Date.now()}distanceTo(i){return Math.sqrt(Math.pow(this.x-i.x,2)+Math.pow(this.y-i.y,2))}equals(i){return this.x===i.x&&this.y===i.y&&this.pressure===i.pressure&&this.time===i.time}velocityFrom(i){return this.time!==i.time?this.distanceTo(i)/(this.time-i.time):0}}class R{static fromPoints(i,e){const n=this.calculateControlPoints(i[0],i[1],i[2]).c2,s=this.calculateControlPoints(i[1],i[2],i[3]).c1;return new R(i[1],n,s,i[2],e.start,e.end)}static calculateControlPoints(i,e,n){const s=i.x-e.x,o=i.y-e.y,r=e.x-n.x,l=e.y-n.y,c_x=(i.x+e.x)/2,c_y=(i.y+e.y)/2,h_x=(e.x+n.x)/2,h_y=(e.y+n.y)/2,u=Math.sqrt(s*s+o*o),p=Math.sqrt(r*r+l*l),g=u+p==0?0:p/(u+p),L=e.x-(h_x+(c_x-h_x)*g),j=e.y-(h_y+(c_y-h_y)*g);return{c1:new E(c_x+L,c_y+j),c2:new E(h_x+L,h_y+j)}}constructor(i,e,n,s,o,r){this.startPoint=i,this.control2=e,this.control1=n,this.endPoint=s,this.startWidth=o,this.endWidth=r}length(){let n,s,e=0;for(let o=0;o<=10;o+=1){const r=o/10,l=this.point(r,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this.point(r,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){const h=l-n,u=c-s;e+=Math.sqrt(h*h+u*u)}n=l,s=c}return e}point(i,e,n,s,o){return e*(1-i)*(1-i)*(1-i)+3*n*(1-i)*(1-i)*i+3*s*(1-i)*i*i+o*i*i*i}}class G{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(i,e,n){this._et.addEventListener(i,e,n)}dispatchEvent(i){return this._et.dispatchEvent(i)}removeEventListener(i,e,n){this._et.removeEventListener(i,e,n)}}class F extends G{constructor(i,e={}){var n,s,o;super(),this.canvas=i,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this.velocityFilterWeight=e.velocityFilterWeight||.7,this.minWidth=e.minWidth||.5,this.maxWidth=e.maxWidth||2.5,this.throttle=null!==(n=e.throttle)&&void 0!==n?n:16,this.minDistance=null!==(s=e.minDistance)&&void 0!==s?s:5,this.dotSize=e.dotSize||0,this.penColor=e.penColor||"black",this.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=e.compositeOperation||"source-over",this.canvasContextOptions=null!==(o=e.canvasContextOptions)&&void 0!==o?o:{},this._strokeMoveUpdate=this.throttle?function A(a,i=250){let s,o,r,e=0,n=null;const l=()=>{e=Date.now(),n=null,s=a.apply(o,r),n||(o=null,r=[])};return function(...h){const u=Date.now(),p=i-(u-e);return o=this,r=h,p<=0||p>i?(n&&(clearTimeout(n),n=null),e=u,s=a.apply(o,r),n||(o=null,r=[])):n||(n=window.setTimeout(l,p)),s}}(F.prototype._strokeUpdate,this.throttle):F.prototype._strokeUpdate,this._handleMouseDown=this._handleMouseDown.bind(this),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this._handleTouchStart=this._handleTouchStart.bind(this),this._handleTouchMove=this._handleTouchMove.bind(this),this._handleTouchEnd=this._handleTouchEnd.bind(this),this._handlePointerDown=this._handlePointerDown.bind(this),this._handlePointerMove=this._handlePointerMove.bind(this),this._handlePointerUp=this._handlePointerUp.bind(this),this._ctx=i.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){const{_ctx:i,canvas:e}=this;i.fillStyle=this.backgroundColor,i.clearRect(0,0,e.width,e.height),i.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0,this._strokePointerId=void 0}fromDataURL(i,e={}){return new Promise((n,s)=>{const o=new Image,r=e.ratio||window.devicePixelRatio||1,l=e.width||this.canvas.width/r,c=e.height||this.canvas.height/r,h=e.xOffset||0,u=e.yOffset||0;this._reset(this._getPointGroupOptions()),o.onload=()=>{this._ctx.drawImage(o,h,u,l,c),n()},o.onerror=p=>{s(p)},o.crossOrigin="anonymous",o.src=i,this._isEmpty=!1})}toDataURL(i="image/png",e){return"image/svg+xml"===i?("object"!=typeof e&&(e=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(e))}`):("number"!=typeof e&&(e=void 0),this.canvas.toDataURL(i,e))}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const i=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!i?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()}_getListenerFunctions(){var i;const e=window.document===this.canvas.ownerDocument?window:null!==(i=this.canvas.ownerDocument.defaultView)&&void 0!==i?i:this.canvas.ownerDocument;return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}_removeMoveUpEventListeners(){const{removeEventListener:i}=this._getListenerFunctions();i("pointermove",this._handlePointerMove),i("pointerup",this._handlePointerUp),i("mousemove",this._handleMouseMove),i("mouseup",this._handleMouseUp),i("touchmove",this._handleTouchMove),i("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(i,{clear:e=!0}={}){e&&this.clear(),this._fromData(i,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(i)}toData(){return this._data}_isLeftButtonPressed(i,e){return e?1===i.buttons:!(1&~i.buttons)}_pointerEventToSignatureEvent(i){return{event:i,type:i.type,x:i.clientX,y:i.clientY,pressure:"pressure"in i?i.pressure:0}}_touchEventToSignatureEvent(i){const e=i.changedTouches[0];return{event:i,type:i.type,x:e.clientX,y:e.clientY,pressure:e.force}}_handleMouseDown(i){!this._isLeftButtonPressed(i,!0)||this._drawingStroke||this._strokeBegin(this._pointerEventToSignatureEvent(i))}_handleMouseMove(i){this._isLeftButtonPressed(i,!0)&&this._drawingStroke?this._strokeMoveUpdate(this._pointerEventToSignatureEvent(i)):this._strokeEnd(this._pointerEventToSignatureEvent(i),!1)}_handleMouseUp(i){this._isLeftButtonPressed(i)||this._strokeEnd(this._pointerEventToSignatureEvent(i))}_handleTouchStart(i){1!==i.targetTouches.length||this._drawingStroke||(i.cancelable&&i.preventDefault(),this._strokeBegin(this._touchEventToSignatureEvent(i)))}_handleTouchMove(i){if(1===i.targetTouches.length){if(i.cancelable&&i.preventDefault(),!this._drawingStroke)return void this._strokeEnd(this._touchEventToSignatureEvent(i),!1);this._strokeMoveUpdate(this._touchEventToSignatureEvent(i))}}_handleTouchEnd(i){0===i.targetTouches.length&&(i.cancelable&&i.preventDefault(),this._strokeEnd(this._touchEventToSignatureEvent(i)))}_getPointerId(i){return i.persistentDeviceId||i.pointerId}_allowPointerId(i,e=!1){return typeof this._strokePointerId>"u"?e:this._getPointerId(i)===this._strokePointerId}_handlePointerDown(i){this._drawingStroke||!this._isLeftButtonPressed(i)||!this._allowPointerId(i,!0)||(this._strokePointerId=this._getPointerId(i),i.preventDefault(),this._strokeBegin(this._pointerEventToSignatureEvent(i)))}_handlePointerMove(i){if(this._allowPointerId(i)){if(!this._isLeftButtonPressed(i,!0)||!this._drawingStroke)return void this._strokeEnd(this._pointerEventToSignatureEvent(i),!1);i.preventDefault(),this._strokeMoveUpdate(this._pointerEventToSignatureEvent(i))}}_handlePointerUp(i){this._isLeftButtonPressed(i)||!this._allowPointerId(i)||(i.preventDefault(),this._strokeEnd(this._pointerEventToSignatureEvent(i)))}_getPointGroupOptions(i){return{penColor:i&&"penColor"in i?i.penColor:this.penColor,dotSize:i&&"dotSize"in i?i.dotSize:this.dotSize,minWidth:i&&"minWidth"in i?i.minWidth:this.minWidth,maxWidth:i&&"maxWidth"in i?i.maxWidth:this.maxWidth,velocityFilterWeight:i&&"velocityFilterWeight"in i?i.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:i&&"compositeOperation"in i?i.compositeOperation:this.compositeOperation}}_strokeBegin(i){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:i,cancelable:!0})))return;const{addEventListener:n}=this._getListenerFunctions();switch(i.event.type){case"mousedown":n("mousemove",this._handleMouseMove,{passive:!1}),n("mouseup",this._handleMouseUp,{passive:!1});break;case"touchstart":n("touchmove",this._handleTouchMove,{passive:!1}),n("touchend",this._handleTouchEnd,{passive:!1});break;case"pointerdown":n("pointermove",this._handlePointerMove,{passive:!1}),n("pointerup",this._handlePointerUp,{passive:!1})}this._drawingStroke=!0;const s=this._getPointGroupOptions(),o=Object.assign(Object.assign({},s),{points:[]});this._data.push(o),this._reset(s),this._strokeUpdate(i)}_strokeUpdate(i){if(!this._drawingStroke)return;if(0===this._data.length)return void this._strokeBegin(i);this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:i}));const e=this._createPoint(i.x,i.y,i.pressure),n=this._data[this._data.length-1],s=n.points,o=s.length>0&&s[s.length-1],r=!!o&&e.distanceTo(o)<=this.minDistance,l=this._getPointGroupOptions(n);if(!o||!o||!r){const c=this._addPoint(e,l);o?c&&this._drawCurve(c,l):this._drawDot(e,l),s.push({time:e.time,x:e.x,y:e.y,pressure:e.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:i}))}_strokeEnd(i,e=!0){this._removeMoveUpEventListeners(),this._drawingStroke&&(e&&this._strokeUpdate(i),this._drawingStroke=!1,this._strokePointerId=void 0,this.dispatchEvent(new CustomEvent("endStroke",{detail:i})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown,{passive:!1})}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown,{passive:!1})}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart,{passive:!1})}_reset(i){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(i.minWidth+i.maxWidth)/2,this._ctx.fillStyle=i.penColor,this._ctx.globalCompositeOperation=i.compositeOperation}_createPoint(i,e,n){const s=this.canvas.getBoundingClientRect();return new E(i-s.left,e-s.top,n,(new Date).getTime())}_addPoint(i,e){const{_lastPoints:n}=this;if(n.push(i),n.length>2){3===n.length&&n.unshift(n[0]);const s=this._calculateCurveWidths(n[1],n[2],e),o=R.fromPoints(n,s);return n.shift(),o}return null}_calculateCurveWidths(i,e,n){const s=n.velocityFilterWeight*e.velocityFrom(i)+(1-n.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(s,n),r={end:o,start:this._lastWidth};return this._lastVelocity=s,this._lastWidth=o,r}_strokeWidth(i,e){return Math.max(e.maxWidth/(i+1),e.minWidth)}_drawCurveSegment(i,e,n){const s=this._ctx;s.moveTo(i,e),s.arc(i,e,n,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(i,e){const n=this._ctx,s=i.endWidth-i.startWidth,o=2*Math.ceil(i.length());n.beginPath(),n.fillStyle=e.penColor;for(let r=0;r<o;r+=1){const l=r/o,c=l*l,h=c*l,u=1-l,p=u*u,f=p*u;let y=f*i.startPoint.x;y+=3*p*l*i.control1.x,y+=3*u*c*i.control2.x,y+=h*i.endPoint.x;let g=f*i.startPoint.y;g+=3*p*l*i.control1.y,g+=3*u*c*i.control2.y,g+=h*i.endPoint.y;const b=Math.min(i.startWidth+h*s,e.maxWidth);this._drawCurveSegment(y,g,b)}n.closePath(),n.fill()}_drawDot(i,e){const n=this._ctx,s=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;n.beginPath(),this._drawCurveSegment(i.x,i.y,s),n.closePath(),n.fillStyle=e.penColor,n.fill()}_fromData(i,e,n){for(const s of i){const{points:o}=s,r=this._getPointGroupOptions(s);if(o.length>1)for(let l=0;l<o.length;l+=1){const c=o[l],h=new E(c.x,c.y,c.pressure,c.time);0===l&&this._reset(r);const u=this._addPoint(h,r);u&&e(u,r)}else this._reset(r),n(o[0],r)}}toSVG({includeBackgroundColor:i=!1}={}){const e=this._data,n=Math.max(window.devicePixelRatio||1,1),r=this.canvas.width/n,l=this.canvas.height/n,c=document.createElementNS("http://www.w3.org/2000/svg","svg");if(c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),c.setAttribute("viewBox",`0 0 ${r} ${l}`),c.setAttribute("width",r.toString()),c.setAttribute("height",l.toString()),i&&this.backgroundColor){const h=document.createElement("rect");h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("fill",this.backgroundColor),c.appendChild(h)}return this._fromData(e,(h,{penColor:u})=>{const p=document.createElement("path");if(!(isNaN(h.control1.x)||isNaN(h.control1.y)||isNaN(h.control2.x)||isNaN(h.control2.y))){const f=`M ${h.startPoint.x.toFixed(3)},${h.startPoint.y.toFixed(3)} C ${h.control1.x.toFixed(3)},${h.control1.y.toFixed(3)} ${h.control2.x.toFixed(3)},${h.control2.y.toFixed(3)} ${h.endPoint.x.toFixed(3)},${h.endPoint.y.toFixed(3)}`;p.setAttribute("d",f),p.setAttribute("stroke-width",(2.25*h.endWidth).toFixed(3)),p.setAttribute("stroke",u),p.setAttribute("fill","none"),p.setAttribute("stroke-linecap","round"),c.appendChild(p)}},(h,{penColor:u,dotSize:p,minWidth:f,maxWidth:y})=>{const g=document.createElement("circle");g.setAttribute("r",(p>0?p:(f+y)/2).toString()),g.setAttribute("cx",h.x.toString()),g.setAttribute("cy",h.y.toString()),g.setAttribute("fill",u),c.appendChild(g)}),c.outerHTML}}var t=m(4438);const $=["sPad"];let N=(()=>{class a{constructor(e){this.modalController=e}ngOnInit(){}ngAfterViewInit(){this.signaturePad=new F(this.signaturePadElement.nativeElement),this.signaturePad.clear(),this.signaturePad.penColor="rgb(56,128,255)"}changeColor(){const e=Math.round(255*Math.random()),n=Math.round(255*Math.random()),s=Math.round(255*Math.random());this.signaturePad.penColor="rgb("+e+","+n+","+s+")"}clear(){this.signaturePad.clear()}cancel(){this.modalController.dismiss()}undo(){const e=this.signaturePad.toData();e&&(e.pop(),this.signaturePad.fromData(e))}download(e,n){if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome"))window.open(e);else{const s=this.dataURLToBlob(e),o=window.URL.createObjectURL(s),r=document.createElement("a");r.href=o,r.download=n,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(o)}}dataURLToBlob(e){const n=e.split(";base64,"),s=n[0].split(":")[1],o=window.atob(n[1]),r=o.length,l=new Uint8Array(r);for(let c=0;c<r;++c)l[c]=o.charCodeAt(c);return new Blob([l],{type:s})}savePNG(){if(this.signaturePad.isEmpty())alert("Please provide a signature first.");else{const e=this.signaturePad.toDataURL();this.modalController.dismiss(e)}}saveJPG(){this.signaturePad.isEmpty()?alert("Please provide a signature first."):this.signaturePad.toDataURL("image/jpeg")}saveSVG(){this.signaturePad.isEmpty()?alert("Please provide a signature first."):this.signaturePad.toDataURL("image/svg+xml")}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(d.W3))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-signature"]],viewQuery:function(n,s){if(1&n&&t.GBs($,7),2&n){let o;t.mGM(o=t.lsd())&&(s.signaturePadElement=o.first)}},inputs:{dataURL:"dataURL"},decls:15,vars:0,consts:[["sPad",""],[1,"signature-pad"],[1,"signature-pad--body"],["width","600","height","300","color","light",2,"touch-action","none"],["size","4"],["expand","full","color","success",3,"click"],["expand","full","color","danger",3,"click"],["expand","full","color","medium",3,"click"]],template:function(n,s){if(1&n){const o=t.RV6();t.j41(0,"div",1)(1,"div",2),t.nrm(2,"canvas",3,0),t.k0s()(),t.j41(4,"ion-grid")(5,"ion-row")(6,"ion-col",4)(7,"ion-button",5),t.bIt("click",function(){return t.eBV(o),t.Njj(s.savePNG())}),t.EFF(8,"Save"),t.k0s()(),t.j41(9,"ion-col",4)(10,"ion-button",6),t.bIt("click",function(){return t.eBV(o),t.Njj(s.clear())}),t.EFF(11,"Clear"),t.k0s()(),t.j41(12,"ion-col",4)(13,"ion-button",7),t.bIt("click",function(){return t.eBV(o),t.Njj(s.cancel())}),t.EFF(14,"Cancel"),t.k0s()()()()}},dependencies:[d.Jm,d.hU,d.lO,d.ln],styles:[".signature-pad[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{margin:0 auto;background-color:#f4f4f4}ion-grid[_ngcontent-%COMP%]{width:100%}"]})}}return a})();var x=m(5083),k=function(a){return a.Prompt="PROMPT",a.Camera="CAMERA",a.Photos="PHOTOS",a}(k||{}),I=function(a){return a.Rear="REAR",a.Front="FRONT",a}(I||{}),T=function(a){return a.Uri="uri",a.Base64="base64",a.DataUrl="dataUrl",a}(T||{});class C extends x.E_{getPhoto(i){var e=this;return(0,_.A)(function*(){return new Promise(function(){var n=(0,_.A)(function*(s,o){if(i.webUseInput||i.source===k.Photos)e.fileInputExperience(i,s,o);else if(i.source===k.Prompt){let r=document.querySelector("pwa-action-sheet");r||(r=document.createElement("pwa-action-sheet"),document.body.appendChild(r)),r.header=i.promptLabelHeader||"Photo",r.cancelable=!1,r.options=[{title:i.promptLabelPhoto||"From Photos"},{title:i.promptLabelPicture||"Take Picture"}],r.addEventListener("onSelection",function(){var l=(0,_.A)(function*(c){0===c.detail?e.fileInputExperience(i,s,o):e.cameraExperience(i,s,o)});return function(c){return l.apply(this,arguments)}}())}else e.cameraExperience(i,s,o)});return function(s,o){return n.apply(this,arguments)}}())})()}pickImages(i){var e=this;return(0,_.A)(function*(){return new Promise(function(){var n=(0,_.A)(function*(s,o){e.multipleFileInputExperience(s,o)});return function(s,o){return n.apply(this,arguments)}}())})()}cameraExperience(i,e,n){var s=this;return(0,_.A)(function*(){if(customElements.get("pwa-camera-modal")){const o=document.createElement("pwa-camera-modal");o.facingMode=i.direction===I.Front?"user":"environment",document.body.appendChild(o);try{yield o.componentOnReady(),o.addEventListener("onPhoto",function(){var r=(0,_.A)(function*(l){const c=l.detail;null===c?n(new x.I9("User cancelled photos app")):c instanceof Error?n(c):e(yield s._getCameraPhoto(c,i)),o.dismiss(),document.body.removeChild(o)});return function(l){return r.apply(this,arguments)}}()),o.present()}catch{s.fileInputExperience(i,e,n)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),s.fileInputExperience(i,e,n)})()}fileInputExperience(i,e,n){let s=document.querySelector("#_capacitor-camera-input");const o=()=>{var r;null===(r=s.parentNode)||void 0===r||r.removeChild(s)};s||(s=document.createElement("input"),s.id="_capacitor-camera-input",s.type="file",s.hidden=!0,document.body.appendChild(s),s.addEventListener("change",r=>{const l=s.files[0];let c="jpeg";if("image/png"===l.type?c="png":"image/gif"===l.type&&(c="gif"),"dataUrl"===i.resultType||"base64"===i.resultType){const h=new FileReader;h.addEventListener("load",()=>{if("dataUrl"===i.resultType)e({dataUrl:h.result,format:c});else if("base64"===i.resultType){const u=h.result.split(",")[1];e({base64String:u,format:c})}o()}),h.readAsDataURL(l)}else e({webPath:URL.createObjectURL(l),format:c}),o()}),s.addEventListener("cancel",r=>{n(new x.I9("User cancelled photos app")),o()})),s.accept="image/*",s.capture=!0,i.source===k.Photos||i.source===k.Prompt?s.removeAttribute("capture"):i.direction===I.Front?s.capture="user":i.direction===I.Rear&&(s.capture="environment"),s.click()}multipleFileInputExperience(i,e){let n=document.querySelector("#_capacitor-camera-input-multiple");const s=()=>{var o;null===(o=n.parentNode)||void 0===o||o.removeChild(n)};n||(n=document.createElement("input"),n.id="_capacitor-camera-input-multiple",n.type="file",n.hidden=!0,n.multiple=!0,document.body.appendChild(n),n.addEventListener("change",o=>{const r=[];for(let l=0;l<n.files.length;l++){const c=n.files[l];let h="jpeg";"image/png"===c.type?h="png":"image/gif"===c.type&&(h="gif"),r.push({webPath:URL.createObjectURL(c),format:h})}i({photos:r}),s()}),n.addEventListener("cancel",o=>{e(new x.I9("User cancelled photos app")),s()})),n.accept="image/*",n.click()}_getCameraPhoto(i,e){return new Promise((n,s)=>{const o=new FileReader,r=i.type.split("/")[1];"uri"===e.resultType?n({webPath:URL.createObjectURL(i),format:r,saved:!1}):(o.readAsDataURL(i),o.onloadend=()=>{const l=o.result;n("dataUrl"===e.resultType?{dataUrl:l,format:r,saved:!1}:{base64String:l.split(",")[1],format:r,saved:!1})},o.onerror=l=>{s(l)})})}checkPermissions(){var i=this;return(0,_.A)(function*(){if(typeof navigator>"u"||!navigator.permissions)throw i.unavailable("Permissions API not available in this browser");try{return{camera:(yield window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw i.unavailable("Camera permissions are not available in this browser")}})()}requestPermissions(){var i=this;return(0,_.A)(function*(){throw i.unimplemented("Not implemented on web.")})()}pickLimitedLibraryPhotos(){var i=this;return(0,_.A)(function*(){throw i.unavailable("Not implemented on web.")})()}getLimitedLibraryPhotos(){var i=this;return(0,_.A)(function*(){throw i.unavailable("Not implemented on web.")})()}}new C;const O=(0,x.F3)("Camera",{web:()=>new C}),U=(0,x.F3)("Geolocation",{web:()=>m.e(2920).then(m.bind(m,2920)).then(a=>new a.GeolocationWeb)});!function X(a=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},void 0===window.Capacitor||a?void 0!==window.cordova&&function V(a){a.CapacitorUtils.Synapse=new Proxy({},{get:(i,e)=>a.cordova.plugins[e]})}(window):function W(a){a.CapacitorUtils.Synapse=new Proxy({},{get:(i,e)=>new Proxy({},{get:(n,s)=>(o,r,l)=>{const c=a.Capacitor.Plugins[e];void 0!==c?"function"==typeof c[s]?(0,_.A)(function*(){try{const h=yield c[s](o);r(h)}catch(h){l(h)}})():l(new Error(`Method ${s} not found in Capacitor plugin ${e}`)):l(new Error(`Capacitor plugin ${e} not found`))}})})}(window))}();var M=m(5312),B=m(7291),Y=m(8176),z=m(7990),K=m(4796),J=m(6722);function H(a,i){if(1&a&&(t.j41(0,"p",41),t.EFF(1),t.k0s()),2&a){const e=t.XpG().$implicit;t.R7$(),t.JRh(e["wpc-pm-description"])}}function q(a,i){1&a&&(t.j41(0,"p",41),t.EFF(1,"No description for this item"),t.k0s())}function Q(a,i){if(1&a&&(t.j41(0,"p",41),t.EFF(1),t.k0s()),2&a){const e=t.XpG().$implicit;t.R7$(),t.SpI("",e["wpc-pm-weight"]," Lbs")}}function Z(a,i){1&a&&(t.j41(0,"p",41),t.EFF(1,"1 Lbs"),t.k0s())}function tt(a,i){if(1&a&&(t.j41(0,"p",41),t.EFF(1),t.k0s()),2&a){const e=t.XpG().$implicit;t.R7$(),t.SpI("",e["wpc-pm-value"]," USD")}}function et(a,i){1&a&&(t.j41(0,"p",41),t.EFF(1,"0.00 USD"),t.k0s())}function it(a,i){if(1&a&&(t.j41(0,"p",41),t.EFF(1),t.k0s()),2&a){const e=t.XpG().$implicit;t.R7$(),t.JRh(e["wpc-pm-qty"])}}function nt(a,i){1&a&&(t.j41(0,"p",41),t.EFF(1,"1"),t.k0s())}function st(a,i){if(1&a&&(t.j41(0,"div",33)(1,"p",34),t.EFF(2,"Item Description"),t.k0s(),t.DNE(3,H,2,1,"p",35)(4,q,2,0,"p",35),t.j41(5,"div",36)(6,"div",37),t.nrm(7,"img",38),t.DNE(8,Q,2,1,"p",35)(9,Z,2,0,"p",35),t.k0s(),t.j41(10,"div",37),t.nrm(11,"img",39),t.DNE(12,tt,2,1,"p",35)(13,et,2,0,"p",35),t.k0s(),t.j41(14,"div",37),t.nrm(15,"img",40),t.DNE(16,it,2,1,"p",35)(17,nt,2,0,"p",35),t.k0s()()()),2&a){const e=i.$implicit;t.R7$(3),t.Y8G("ngIf",e["wpc-pm-description"]),t.R7$(),t.Y8G("ngIf",!e["wpc-pm-description"]),t.R7$(4),t.Y8G("ngIf",e["wpc-pm-weight"]),t.R7$(),t.Y8G("ngIf",!e["wpc-pm-weight"]),t.R7$(3),t.Y8G("ngIf",e["wpc-pm-value"]),t.R7$(),t.Y8G("ngIf",!e["wpc-pm-value"]),t.R7$(3),t.Y8G("ngIf",e["wpc-pm-description"]),t.R7$(),t.Y8G("ngIf",!e["wpc-pm-description"])}}function ot(a,i){if(1&a&&(t.j41(0,"ion-row",30)(1,"ion-col",31),t.DNE(2,st,18,8,"div",32),t.k0s()()),2&a){const e=t.XpG().$implicit;t.R7$(2),t.Y8G("ngForOf",e.shipment_packages)}}function at(a,i){if(1&a){const e=t.RV6();t.j41(0,"section",12)(1,"ion-grid",13)(2,"ion-row",14)(3,"ion-col",15)(4,"h5",16),t.EFF(5),t.k0s()(),t.j41(6,"ion-col",17)(7,"ion-col",18)(8,"ion-button",19),t.EFF(9),t.k0s()()()(),t.j41(10,"ion-row",20)(11,"ion-col",21)(12,"p",22),t.EFF(13),t.k0s()(),t.j41(14,"ion-col",23)(15,"p",24),t.EFF(16),t.nI1(17,"date"),t.k0s()()(),t.j41(18,"ion-row",25)(19,"ion-col",21)(20,"p",26),t.EFF(21),t.k0s(),t.j41(22,"p",26),t.EFF(23),t.k0s()(),t.j41(24,"ion-col",23)(25,"div",27)(26,"ion-button",28),t.bIt("click",function(){const s=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.trackDetails(s.ID))}),t.EFF(27,"View"),t.k0s()()()(),t.DNE(28,ot,3,1,"ion-row",29),t.k0s()()}if(2&a){const e=i.$implicit;t.R7$(5),t.JRh(e.shipment_number),t.R7$(4),t.JRh(e.wpcargo_status),t.R7$(4),t.JRh(e.wpcargo_receiver_name),t.R7$(3),t.JRh(t.i5U(17,7,e.current_date,"MMM dd yyyy")),t.R7$(5),t.JRh(e.wpcargo_receiver_phone),t.R7$(2),t.JRh(e.wpcargo_receiver_address),t.R7$(5),t.Y8G("ngIf",e.shipment_packages.length>0)}}function rt(a,i){if(1&a&&(t.j41(0,"div",10),t.DNE(1,at,29,10,"section",11),t.k0s()),2&a){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.searchedList)}}function ct(a,i){if(1&a){const e=t.RV6();t.j41(0,"ion-col",47)(1,"ion-icon",60),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.removeSignature())}),t.k0s(),t.nrm(2,"img",61),t.k0s()}if(2&a){const e=t.XpG(2);t.R7$(2),t.FS9("src",e.postData.signature,t.B4B)}}function lt(a,i){if(1&a){const e=t.RV6();t.j41(0,"ion-button",51),t.bIt("click",function(){t.eBV(e);const s=t.XpG(2);return t.Njj(s.presentModal())}),t.EFF(1,"Sign"),t.k0s()}}function ht(a,i){if(1&a){const e=t.RV6();t.j41(0,"ion-col",62)(1,"ion-icon",63),t.bIt("click",function(){const s=t.eBV(e).index,o=t.XpG(2);return t.Njj(o.removeImage(s))}),t.k0s(),t.nrm(2,"ion-img",64),t.k0s()}if(2&a){const e=i.$implicit;t.R7$(2),t.Y8G("src",e)}}function dt(a,i){if(1&a){const e=t.RV6();t.j41(0,"ion-checkbox",73),t.bIt("ionChange",function(s){t.eBV(e);const o=t.XpG(3);return t.Njj(o.locationAutocomplete(s))}),t.j41(1,"p",74)(2,"span"),t.EFF(3,"Unset Autofill Address ?"),t.k0s()()()}}function ut(a,i){if(1&a){const e=t.RV6();t.j41(0,"ion-input",75),t.mxI("ngModelChange",function(s){t.eBV(e);const o=t.XpG(3);return t.DH7(o.autocomplete.input,s)||(o.autocomplete.input=s),t.Njj(s)}),t.bIt("ionInput",function(){t.eBV(e);const s=t.XpG(3);return t.Njj(s.UpdateSearchResults())}),t.k0s()}if(2&a){const e=t.XpG().$implicit,n=t.XpG(2);t.FS9("name",e.key),t.Mz_("placeholder","Enter ",e.key,""),t.FS9("value",n.addressValue),t.R50("ngModel",n.autocomplete.input)}}function pt(a,i){if(1&a){const e=t.RV6();t.j41(0,"ion-item",78),t.bIt("click",function(){const s=t.eBV(e).$implicit,o=t.XpG(4);return t.Njj(o.SelectSearchResult(s))}),t.nrm(1,"ion-icon",79),t.EFF(2),t.k0s()}if(2&a){const e=i.$implicit;t.R7$(2),t.SpI(" ",e.description," ")}}function _t(a,i){if(1&a&&(t.j41(0,"ion-list",76),t.DNE(1,pt,3,1,"ion-item",77),t.k0s()),2&a){const e=t.XpG(3);t.Y8G("hidden",0==e.autocompleteItems.length),t.R7$(),t.Y8G("ngForOf",e.autocompleteItems)}}function mt(a,i){if(1&a&&(t.j41(0,"ion-select-option",82),t.EFF(1),t.k0s()),2&a){const e=i.$implicit;t.FS9("value",e.value),t.R7$(),t.JRh(e.value)}}function gt(a,i){if(1&a){const e=t.RV6();t.j41(0,"ion-select",80),t.mxI("ngModelChange",function(s){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG(2);return t.DH7(r.postData[o.key],s)||(r.postData[o.key]=s),t.Njj(s)}),t.DNE(1,mt,2,2,"ion-select-option",81),t.nI1(2,"keyvalue"),t.k0s()}if(2&a){const e=t.XpG().$implicit,n=t.XpG(2);t.FS9("name",e.key),t.R50("ngModel",n.postData[e.key]),t.R7$(),t.Y8G("ngForOf",t.bMT(2,3,e.value.options))}}function ft(a,i){if(1&a){const e=t.RV6();t.j41(0,"ion-textarea",83),t.mxI("ngModelChange",function(s){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG(2);return t.DH7(r.postData[o.key],s)||(r.postData[o.key]=s),t.Njj(s)}),t.k0s()}if(2&a){const e=t.XpG().$implicit,n=t.XpG(2);t.FS9("name",e.key),t.Mz_("placeholder","Enter ",e.key,""),t.R50("ngModel",n.postData[e.key])}}function vt(a,i){if(1&a&&(t.j41(0,"ion-grid",65)(1,"ion-row",66)(2,"ion-col",67),t.DNE(3,dt,4,0,"ion-checkbox",68)(4,ut,1,5,"ion-input",69)(5,_t,2,2,"ion-list",70)(6,gt,3,5,"ion-select",71)(7,ft,1,4,"ion-textarea",72),t.k0s()()()),2&a){const e=i.$implicit;t.R7$(3),t.Y8G("ngIf","text"==e.value.field&&"location"==e.key),t.R7$(),t.Y8G("ngIf","text"==e.value.field&&"location"==e.key),t.R7$(),t.Y8G("ngIf","text"==e.value.field&&"location"==e.key),t.R7$(),t.Y8G("ngIf","select"==e.value.field),t.R7$(),t.Y8G("ngIf","textarea"==e.value.field)}}function wt(a,i){if(1&a){const e=t.RV6();t.j41(0,"div",42)(1,"ion-refresher",43),t.bIt("ionRefresh",function(s){t.eBV(e);const o=t.XpG();return t.Njj(o.handleRefresh(s))}),t.nrm(2,"ion-refresher-content"),t.k0s(),t.j41(3,"ion-text",1)(4,"h1",44),t.EFF(5),t.k0s()(),t.j41(6,"section",45)(7,"ion-grid",46)(8,"ion-row",14)(9,"ion-col",47)(10,"h5",16),t.EFF(11,"Proof of Delivery Signature"),t.k0s()()(),t.j41(12,"ion-row",20),t.DNE(13,ct,3,1,"ion-col",48),t.j41(14,"ion-col",49),t.DNE(15,lt,2,0,"ion-button",50),t.k0s()()(),t.j41(16,"ion-grid",46)(17,"ion-row",14)(18,"ion-col",47)(19,"h5",16),t.EFF(20,"Shipment Images & Attachments"),t.k0s()()(),t.j41(21,"ion-row",20)(22,"ion-col",49)(23,"ion-button",51),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.takeSnap())}),t.nrm(24,"ion-icon",52),t.EFF(25," Take Photo "),t.k0s()()(),t.j41(26,"ion-row"),t.DNE(27,ht,3,1,"ion-col",53),t.k0s()(),t.j41(28,"form")(29,"ion-grid",13)(30,"ion-row",14)(31,"ion-col",47)(32,"h5",16),t.EFF(33,"Update Shipment History"),t.k0s()()(),t.j41(34,"ion-row")(35,"ion-col",54),t.DNE(36,vt,8,5,"ion-grid",55),t.nI1(37,"keyvalue"),t.k0s()()(),t.j41(38,"ion-grid")(39,"ion-row",56)(40,"ion-col",47)(41,"div",57)(42,"ion-button",58),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.submitAction())}),t.EFF(43,"Save"),t.k0s(),t.j41(44,"ion-button",59),t.bIt("click",function(){t.eBV(e);const s=t.XpG();return t.Njj(s.goToShipments())}),t.EFF(45,"Back"),t.k0s()()()()()()()()}if(2&a){const e=t.XpG();t.R7$(5),t.JRh(e.shipmentFullData.shipment_number),t.R7$(8),t.Y8G("ngIf",null!=e.postData.signature),t.R7$(2),t.Y8G("ngIf",null==e.postData.signature),t.R7$(12),t.Y8G("ngForOf",e.capturedSnapURL),t.R7$(9),t.Y8G("ngForOf",t.bMT(37,5,e.signFields))}}const yt=[{path:"",component:(()=>{class a{constructor(e,n,s,o,r,l,c,h,u,p,f){this.activatedRoute=e,this.storageService=n,this.shipmentService=s,this.router=o,this.modalController=r,this.toasterService=l,this.loadingController=c,this.zone=h,this.auth=u,this.httpService=p,this._location=f,this.search="",this.stateFlag=!1,this.loadFlag=!1,this.searchingFlag=!1,this.noResultFlag=!1,this.isSettingsSetup=!1,this.errorMessage=!1,this.imageSrc="",this.capturedSnapURL=[],this.statusList=[],this.signFields=[],this.signFields1=[],this.canUpdate=!0,this.onProcess=!1,this.viewShipper=!1,this.viewReceiver=!1,this.viewPackage=!1,this.viewShipperIcon="arrow-down",this.viewReceiverIcon="arrow-down",this.viewPackageIcon="arrow-down",this.apiKey="",this.driverName="",this.errMessage="",this.shipperFields=[],this.receiverFields=[],this.unRequiredFields=[],this.shipmentFullData=[],this.postData={signature:null,shipment:"",shipment_history:[],pod_images:[],location:"",wpcargo_status:""},this.autocomplete={input:""},this.autocompleteItems=[],this.sign_required="",this.fillAddress="",this.addressValue="",this.shipmentData=[],this.isLoading=!1,this.GoogleAutocomplete=new google.maps.places.AutocompleteService}ngOnInit(){var e=this;return(0,_.A)(function*(){yield e.loadLocalData(),e.activatedRoute.paramMap.subscribe(n=>{n.has("shipmentID")&&(e.shipmentId=n.get("shipmentID"))})})()}ionViewWillEnter(){this.resetForm(),this.shipmentData=null,this.errMessage="",this.canUpdate=!0,this.getapikeyAndFetchData(),this.getapikey(),this.autocomplete.input="",this.storageService.get(w.u.UNREQUIRED_FIELDS).then(e=>{this.unRequiredFields=e})}getapikeyAndFetchData(){var e=this;return(0,_.A)(function*(){e.authUser&&e.authUser.apiKey?yield e.fetchShipmentData():e.authSubscription=e.auth.userData$.subscribe(function(){var n=(0,_.A)(function*(s){if(s?.apiKey)e.authUser=s,yield e.fetchShipmentData();else{const o=yield e.storageService.get(w.u.AUTH);o?.apiKey?(e.authUser=o,yield e.fetchShipmentData()):e.toasterService.presentToast("User not authenticated","danger")}});return function(s){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.authSubscription?.unsubscribe()}loadLocalData(){var e=this;return(0,_.A)(function*(){const[n,s,o,r,l]=yield Promise.all([e.storageService.get(w.u.STATUS),e.storageService.get(w.u.SIGN_FIELDS),e.storageService.get(w.u.AUTH),e.storageService.get(w.u.SHIPPER_FIELDS),e.storageService.get(w.u.RECEIVER_FIELDS)]);e.statusList=n,e.signFields=e.signFields1=s,e.apiKey=o.apiKey,e.driverName=`${o.first_name} ${o.last_name}`,Object.keys(s).forEach(c=>{e.postData[c.toString()]=""}),e.shipperFields=Object.entries(r).map(([c,h])=>({key:c,value:h})),e.receiverFields=Object.entries(l).map(([c,h])=>({key:c,value:h}))})()}presentLoading(){var e=this;return(0,_.A)(function*(){e.isLoading=!0,yield(yield e.loadingController.create({spinner:"circles",message:"Processing Shipment Data...",duration:3e3})).present()})()}fetchShipmentData(){var e=this;return(0,_.A)(function*(){var n;e.authUser&&e.authUser.apiKey?(e.presentLoading(),e.shipmentService.getShipmentByID(e.authUser.apiKey,e.shipmentId).subscribe({next:(n=(0,_.A)(function*(s){if(e.loadingController.dismiss(),"error"===s.status)e.canUpdate=!1,e.errMessage=s.message;else{const{ID:o,shipment_number:r}=s;let l={ID:o,shipment_number:r};for(const c of e.shipperFields)l[c.key]=s[c.key];for(const c of e.receiverFields)l[c.key]=s[c.key];e.shipmentData={...l},e.shipmentFullData=s,yield e.getCurrentLoc()}}),function(o){return n.apply(this,arguments)}),error:n=>{e.loadingController.dismiss(),e.toasterService.presentToast("Network Issue. "+n.error.message,"danger",2e3)}})):e.toasterService.presentToast("Authentication data missing.","danger")})()}getCurrentLoc(){var e=this;return(0,_.A)(function*(){try{const n=yield U.getCurrentPosition();e.httpService.getMapLocation(`${n.coords.latitude},${n.coords.longitude}`,M.c.apiKey).subscribe({next:o=>{"OK"===o.status&&o.results.length>0&&(e.fillAddress=o.results[0],e.addressValue=e.fillAddress.formatted_address,e.postData.location=e.addressValue),e.loadingController.dismiss()}})}catch{e.toasterService.presentToast("Location access failed.","danger"),e.loadingController.dismiss()}})()}presentModal(){var e=this;return(0,_.A)(function*(){const n=yield e.modalController.create({component:N,cssClass:"signatureModal"});return n.onWillDismiss().then(s=>{e.postData.signature=s.data}),yield n.present()})()}removeSignature(){this.postData.signature=null}trackDetails(e){this.router.navigate(["./home/view/"+e])}goToShipments(){this.resetForm(),this._location.back()}resetForm(){this.postData={signature:null,shipment:"",shipment_history:[],pod_images:[],location:"",wpcargo_status:""},this.capturedSnapURL=[]}validateInputs(){if(!this.unRequiredFields.includes("signature")&&!this.postData.signature)return this.toasterService.presentToast("Signature is required.","danger"),!1;if(!this.unRequiredFields.includes("photo")&&0===this.capturedSnapURL.length)return this.toasterService.presentToast("Images are required.","danger"),!1;for(let e in this.signFields){const n=this.postData[e];if(!n||0===n.trim().length&&this.signFields[e].required)return this.toasterService.presentToast(`${this.signFields[e].label} is required.`,"danger"),!1}return!0}getapikey(){this.authSubscription=this.auth.userData$.subscribe(e=>{e.apiKey?this.authUser=e:this.storageService.get(w.u.AUTH).then(n=>{this.authUser=n})})}submitAction(){if(!this.validateInputs())return;this.presentLoading(),this.onProcess=!0;let n={...this.postData};n.shipment=this.shipmentData.shipment_number,n.pod_images=this.capturedSnapURL,n.shipment_history=[{date:(0,v.Yq)(new Date,"yyyy-MM-dd","en"),time:(0,v.Yq)(new Date,"H:m:s","en"),"updated-name":this.driverName}];for(let s in this.signFields){const o=this.postData[s]?.trim()||"";n.shipment_history[0][s]=o,"status"===s&&(n.wpcargo_status=o)}this.shipmentService.updateShipment(this.authUser.apiKey,n).subscribe({next:s=>{this.onProcess=!1,this.toasterService.presentToast(s.message,"success"),n.status&&this.router.navigate(["./home/shipments/"+n.status])},error:s=>{this.onProcess=!1,this.toasterService.presentToast("Error. "+s.error.message,"danger",2e3)}})}takeSnap(){var e=this;return(0,_.A)(function*(){const n=yield O.getPhoto({quality:70,allowEditing:!0,resultType:T.Base64}),s="data:image/png;base64,"+n.base64String;e.imageSrc=n.base64String,e.capturedSnapURL.push(s)})()}removeImage(e){this.capturedSnapURL.splice(e,1)}toggleSection(e){switch(e){case"shipper":this.viewShipper=!this.viewShipper,this.viewShipperIcon=this.viewShipper?"arrow-up":"arrow-down";break;case"receiver":this.viewReceiver=!this.viewReceiver,this.viewReceiverIcon=this.viewReceiver?"arrow-up":"arrow-down";break;case"package":this.viewPackage=!this.viewPackage,this.viewPackageIcon=this.viewPackage?"arrow-up":"arrow-down"}}SelectSearchResult(e){this.autocomplete.input=e.description,this.postData.location=e.description,this.autocompleteItems=[]}onSearchShipment(){this.searchShipments()}onInput(){this.onClear()}onClear(){this.searchedList=null,this.searchingFlag=!1,this.errorMessage=!1}resetSearch(){this.search="",this.onClear()}searchShipments(){this.presentLoading(),this.searchingFlag=!0;const e={search:this.search.trim()};this.shipmentService.searchShipment(this.authUser.apiKey,e).subscribe({next:n=>{this.searchedList=n,this.searchingFlag=!1,this.setDate(),this.loadingController.dismiss(),this.errorMessage=n?"":"No result found"},error:n=>{this.errorMessage="Network Issue. "+n.error.message}})}setDate(){this.searchedList&&this.searchedList.forEach((e,n)=>{e.shipment_history?.length&&(this.searchedList[n].current_date=e.shipment_history[0].date)})}handleRefresh(e){setTimeout(()=>{this.ionViewWillEnter(),e.target.complete()},2e3)}locationAutocomplete(e){var n=this;return(0,_.A)(function*(){n.presentLoading();const s=yield U.getCurrentPosition(),o=`${s.coords.latitude},${s.coords.longitude}`;e.detail.checked?(n.addressValue="",n.postData.location=n.addressValue):n.httpService.getMapLocation(o,M.c.apiKey).subscribe({next:r=>{"OK"===r.status&&r.results.length&&(n.fillAddress=r.results[0],n.addressValue=n.fillAddress.formatted_address,n.postData.location=n.addressValue),n.loadingController.dismiss()}})})()}UpdateSearchResults(){this.autocomplete.input?this.GoogleAutocomplete.getPlacePredictions({input:this.autocomplete.input},(e,n)=>{this.autocompleteItems=[],this.zone.run(()=>{e?.forEach(s=>{this.autocompleteItems.push(s)})})}):this.autocompleteItems=[]}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(P.nX),t.rXU(B.n),t.rXU(Y.o),t.rXU(P.Ix),t.rXU(d.W3),t.rXU(z.W),t.rXU(d.Xi),t.rXU(t.SKi),t.rXU(K.u),t.rXU(J.k),t.rXU(v.aZ))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-shipment"]],decls:11,vars:3,consts:[["id","dark_backgrounded",1,"ion-no-border",3,"translucent"],["color","clear"],["slot","secondary",2,"width","100%"],["color","primary"],[3,"click"],["name","arrow-undo-circle-outline","color","primary"],["id","app-logo","src","../../assets/images/logo.png","alt","Site Logo","height","35px",1,"inner-page"],[1,"ion-padding"],["class","searched-shipments","id","content-inner",4,"ngIf"],["id","content-inner",4,"ngIf"],["id","content-inner",1,"searched-shipments"],["class","inner-list","lines","full",4,"ngFor","ngForOf"],["lines","full",1,"inner-list"],[1,"ion-no-padding"],[1,"row-with-background","ion-align-items-center"],["size","8"],[1,"white","ion-text-uppercase"],["size","4",1,"ion-text-right"],["size","4",1,"ion-text-center"],["shape","default","size","small",1,"wpc-button-sm-light","ion-text-uppercase"],[1,"ion-align-items-center","padded-row"],["size","7"],[1,"text-large","ion-text-uppercase"],["size","5",1,"ion-text-right"],[1,"text-large"],[1,"ion-align-items-start","padded-row"],[1,"text-small"],[1,"inner-buttons"],["shape","default","size","small",1,"wpc-button-sm-green","ion-text-uppercase",3,"click"],["class","padded-row",4,"ngIf"],[1,"padded-row"],["size","10",1,"light-blue-indented"],["class","package-fields",4,"ngFor","ngForOf"],[1,"package-fields"],[1,"label-sm-bold"],["class","label-sm-indented",4,"ngIf"],[1,"parcel-details"],[1,"item-detail"],["src","../../../assets/images/weight-loss.png","alt","Item icon",1,"item-icon"],["src","../../../assets/images/money.png","alt","Item icon",1,"item-icon"],["src","../../../assets/images/quality.png","alt","Item icon",1,"item-icon"],[1,"label-sm-indented"],["id","content-inner"],["slot","fixed",3,"ionRefresh"],[1,"dark-blue","ion-text-start","title","ion-margin"],[1,"inner-list"],[1,"grid-with-background","ion-no-padding"],["size","12"],["size","12",4,"ngIf"],["size","12",1,"ion-text-center"],["class","ion-text-uppercase","color","primary","expand","full",3,"click",4,"ngIf"],["color","primary","expand","full",1,"ion-text-uppercase",3,"click"],["name","camera-outline",1,"ion-margin-end"],["size","4",4,"ngFor","ngForOf"],["size","12",1,"ion-padding"],["class","underlined",4,"ngFor","ngForOf"],[1,"ion-text-right"],[1,"two-buttons"],["shape","default","expand","full","color","primary","size","small",1,"ion-text-uppercase",3,"click"],["shape","default","expand","full","color","tertiary","size","small",1,"ion-text-uppercase",3,"click"],["color","danger","name","trash-outline",1,"ion-float-right",3,"click"],["alt","signature",3,"src"],["size","4"],["name","trash",1,"trash-image",3,"click"],[3,"src"],[1,"underlined"],[1,"ion-no-padding","ion-align-items-center"],["size","12",1,"ion-no-padding"],["labelPlacement","end","alignment","start","class","autofill_address",3,"ionChange",4,"ngIf"],["class","boxed-input","type","text","autocomplete","off",3,"name","placeholder","ngModel","value","ngModelChange","ionInput",4,"ngIf"],["id","searhed-list",3,"hidden",4,"ngIf"],["placeholder","Select Status","okText","Select","cancelText","Dismiss",3,"name","ngModel","ngModelChange",4,"ngIf"],[3,"name","placeholder","ngModel","ngModelChange",4,"ngIf"],["labelPlacement","end","alignment","start",1,"autofill_address",3,"ionChange"],[1,"checkbox-label"],["type","text","autocomplete","off",1,"boxed-input",3,"ngModelChange","ionInput","name","placeholder","ngModel","value"],["id","searhed-list",3,"hidden"],["tappable","","class","searched-item",3,"click",4,"ngFor","ngForOf"],["tappable","",1,"searched-item",3,"click"],["color","secondary","name","map-outline",1,"ion-margin-end","searched-icon"],["placeholder","Select Status","okText","Select","cancelText","Dismiss",3,"ngModelChange","name","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngModelChange","name","placeholder","ngModel"]],template:function(n,s){1&n&&(t.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t.nrm(3,"ion-menu-button",3),t.j41(4,"ion-button",4),t.bIt("click",function(){return s.goToShipments()}),t.nrm(5,"ion-icon",5),t.k0s(),t.j41(6,"ion-title",3),t.nrm(7,"img",6),t.k0s()()()(),t.j41(8,"ion-content",7),t.DNE(9,rt,2,1,"div",8)(10,wt,46,7,"div",9),t.k0s()),2&n&&(t.Y8G("translucent",!0),t.R7$(9),t.Y8G("ngIf",s.searchedList),t.R7$(),t.Y8G("ngIf",!s.searchedList))},dependencies:[v.Sq,v.bT,S.qT,S.BC,S.cb,S.vS,S.cV,d.Jm,d.QW,d.eY,d.hU,d.W9,d.lO,d.eU,d.iq,d.KW,d.$w,d.uz,d.nf,d.MC,d.To,d.Ki,d.ln,d.Nm,d.Ip,d.IO,d.nc,d.BC,d.ai,d.hB,d.Je,d.Gw,v.vh,v.lG]})}}return a})()}];let St=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[P.iI.forChild(yt),P.iI]})}}return a})(),xt=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=t.$C({type:a})}static{this.\u0275inj=t.G2t({imports:[v.MD,S.YN,d.bv,St]})}}return a})()}}]);