"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7558],{7558:(G,c,n)=>{n.r(c),n.d(c,{AccountsPageModule:()=>I});var u=n(177),g=n(9417),r=n(9893),l=n(9315),h=n(467),p=n(8199),e=n(4438),m=n(4796),f=n(7291),F=n(8176),v=n(7990);function D(a,o){if(1&a&&(e.j41(0,"p",23),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.driverFullData.fullname)}}function A(a,o){1&a&&(e.j41(0,"p",23),e.EFF(1,"N/A"),e.k0s())}function E(a,o){if(1&a&&(e.j41(0,"p",23),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.driverFullData.address)}}function k(a,o){1&a&&(e.j41(0,"p",23),e.EFF(1,"N/A"),e.k0s())}function y(a,o){if(1&a&&(e.j41(0,"p",23),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.driverFullData.email)}}function R(a,o){1&a&&(e.j41(0,"p",23),e.EFF(1,"N/A"),e.k0s())}function j(a,o){if(1&a&&(e.j41(0,"p",23),e.EFF(1),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(t.driverFullData.phone)}}function x(a,o){1&a&&(e.j41(0,"p",23),e.EFF(1,"N/A"),e.k0s())}const S=[{path:"",component:(()=>{class a{constructor(t,i,s,d,P,$){this.authService=t,this.storageService=i,this.shipmentService=s,this.toasterService=d,this.loadingController=P,this.router=$,this.userData=[],this.search="",this.stateFlag=!1,this.loadFlag=!1,this.searchingFlag=!1,this.noResultFlag=!1,this.isSettingsSetup=!1,this.errorMessage=!1,this.isLoading=!1,this.apiKey="",this.driverName="",this.errMessage="",this.canUpdate=!0,this.driverFullData=[]}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,h.A)(function*(){t.loading=yield t.presentLoading();const i=yield t.storageService.get(p.u.AUTH);i&&i.apiKey?(t.authUser=i,t.userData=i,t.userData.fullname=t.userData.first_name||t.userData.last_name?t.userData.first_name+" "+t.userData.last_name:t.userData.username,t.apiKey=i.apiKey,t.shipmentService.getDriverDetails(t.authUser.apiKey).subscribe({next:s=>{t.userData.username&&(s.username=t.userData.username),t.driverFullData=t.remapDriverData(s),t.loading.dismiss()},error:s=>{t.handleError(s,"Failed to fetch user data"),t.loading.dismiss()}})):(t.loading.dismiss(),t.toasterService.presentToast("Authentication failed. Please log in again.","danger"),t.router.navigate(["/login"]))})()}remapDriverData(t){let i={};return i.fullname=t.first_name+" "+t.last_name,!t.first_name&&!t.last_name&&(i.fullname=t.username),t.billing_address_1&&(i.address=t.billing_address_1),i.email=t.billing_email,i.phone=t.phone?t.phone:t.billing_phone,i}logout(){this.authService.logout()}onSearchShipment(){this.searchShipments()}onInput(){this.onClear()}onClear(){this.searchedList=null,this.searchingFlag=!1,this.errorMessage=!1}resetSearch(){this.searchedList=null,this.errorMessage=!1,this.search=""}searchShipments(){this.presentLoading(),this.searchingFlag=!0;let t={};t.search=this.search.trim(),this.shipmentService.searchShipment(this.authUser.apiKey,t).subscribe({next:i=>{this.errorMessage=i?"":"No result Found",this.searchedList=i,this.searchingFlag=!1},error:i=>{this.handleError(i,"Failed to search shipments"),this.searchingFlag=!1}})}presentLoading(){var t=this;return(0,h.A)(function*(){const i=yield t.loadingController.create({spinner:"circles",message:"Loading details...",duration:1e3});return yield i.present(),i})()}handleRefresh(t){setTimeout(()=>{this.ionViewWillEnter().finally(()=>{t.target.complete()})},2e3)}handleError(t,i="Network Issue"){this.toasterService.presentToast(`${i}: ${t.message||"Unknown error"}`,"danger",6e3)}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(m.u),e.rXU(f.n),e.rXU(F.o),e.rXU(v.W),e.rXU(r.Xi),e.rXU(l.Ix))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-accounts"]],decls:51,vars:10,consts:[["id","dark_backgrounded",1,"ion-no-border",3,"translucent"],["color","clear"],["slot","secondary",2,"width","100%"],["color","primary"],["id","app-logo","src","../../assets/images/logo.png","alt","Site Logo","height","35px",1,"inner-page"],[1,"ion-margin","ion-padding"],["id","content-inner"],[1,"main-page"],["size","12",1,"ion-text-center"],["src","../../../assets/images/driver-image.png","alt","Driver Image","width","150px",1,"driver-image"],[1,"text-large","ion-text-uppercase"],["size","12"],[1,"ion-text-center"],["expand","full","color","tertiary",1,"ion-text-uppercase",3,"click"],["name","log-out-outline"],[1,"grid-with-background","ion-no-padding"],[1,"row-with-background","ion-align-items-center"],[1,"white","ion-text-uppercase"],[1,"ion-align-items-center","padded-row"],["size","12",1,"padded-row"],[1,"text-label-flex"],[1,"text-label-small","ion-text-uppercase"],["class","text-label-big",4,"ngIf"],[1,"text-label-big"]],template:function(i,s){1&i&&(e.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),e.nrm(3,"ion-menu-button",3),e.j41(4,"ion-title",3),e.nrm(5,"img",4),e.k0s()()()(),e.j41(6,"ion-content",5)(7,"div",6)(8,"section",7)(9,"ion-grid")(10,"ion-row")(11,"ion-col",8),e.nrm(12,"img",9),e.k0s(),e.j41(13,"ion-col",8)(14,"p",10),e.EFF(15),e.k0s()(),e.j41(16,"ion-col",11)(17,"div",12)(18,"ion-button",13),e.bIt("click",function(){return s.logout()}),e.nrm(19,"ion-icon",14),e.EFF(20," Logout"),e.k0s()()()()(),e.j41(21,"ion-grid",15)(22,"ion-row",16)(23,"ion-col",11)(24,"h5",17),e.EFF(25,"Account Details"),e.k0s()()(),e.j41(26,"ion-row",18)(27,"ion-col",19)(28,"div",20)(29,"p",21),e.EFF(30,"Fullname"),e.k0s(),e.DNE(31,D,2,1,"p",22)(32,A,2,0,"p",22),e.k0s()(),e.j41(33,"ion-col",19)(34,"div",20)(35,"p",21),e.EFF(36,"Address"),e.k0s(),e.DNE(37,E,2,1,"p",22)(38,k,2,0,"p",22),e.k0s()(),e.j41(39,"ion-col",19)(40,"div",20)(41,"p",21),e.EFF(42,"Email Address"),e.k0s(),e.DNE(43,y,2,1,"p",22)(44,R,2,0,"p",22),e.k0s()(),e.j41(45,"ion-col",19)(46,"div",20)(47,"p",21),e.EFF(48,"Phone Number"),e.k0s(),e.DNE(49,j,2,1,"p",22)(50,x,2,0,"p",22),e.k0s()()()()()()()),2&i&&(e.Y8G("translucent",!0),e.R7$(15),e.JRh(s.userData.fullname),e.R7$(16),e.Y8G("ngIf",s.driverFullData.fullname),e.R7$(),e.Y8G("ngIf",!s.driverFullData.fullname),e.R7$(5),e.Y8G("ngIf",s.driverFullData.address),e.R7$(),e.Y8G("ngIf",!s.driverFullData.address),e.R7$(5),e.Y8G("ngIf",s.driverFullData.email),e.R7$(),e.Y8G("ngIf",!s.driverFullData.email),e.R7$(5),e.Y8G("ngIf",s.driverFullData.phone),e.R7$(),e.Y8G("ngIf",!s.driverFullData.phone))},dependencies:[u.bT,r.Jm,r.QW,r.hU,r.W9,r.lO,r.eU,r.iq,r.MC,r.ln,r.BC,r.ai]})}}return a})()}];let b=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[l.iI.forChild(S),l.iI]})}}return a})(),I=(()=>{class a{static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[u.MD,g.YN,r.bv,b]})}}return a})()}}]);