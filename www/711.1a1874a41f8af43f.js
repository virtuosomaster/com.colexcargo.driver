"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[711],{3822:(E,N,s)=>{s.d(N,{Nn:()=>u,gH:()=>g});var g=function(t){return t.CalendarEvent="CALENDAR_EVENT",t.ContactInfo="CONTACT_INFO",t.DriversLicense="DRIVERS_LICENSE",t.Email="EMAIL",t.Geo="GEO",t.Isbn="ISBN",t.Phone="PHONE",t.Product="PRODUCT",t.Sms="SMS",t.Text="TEXT",t.Url="URL",t.Wifi="WIFI",t.Unknown="UNKNOWN",t}(g||{}),u=function(t){return t.Front="FRONT",t.Back="BACK",t}(u||{})},711:(E,N,s)=>{s.r(N),s.d(N,{ScannerPageModule:()=>L});var d=s(177),g=s(9417),a=s(9893),u=s(9315),o=s(467),l=s(5083);s(3822);const c=(0,l.F3)("BarcodeScanner",{web:()=>s.e(870).then(s.bind(s,870)).then(e=>new e.BarcodeScannerWeb)});var O=s(8199),t=s(4438),f=s(8176),A=s(7291);const C=[{path:"",component:(()=>{class e{constructor(n,r,i,h,U,b){this.alertController=n,this.ngZone=r,this.router=i,this.shipmentService=h,this.storageService=U,this.loadingController=b,this.apiKey="",this.scanStatus=!1,this.shipmentData=[],this.deliveredStatus="",this.message="",this.isLoading=!1,this.isSupported=!1,this.barcodes=[]}ngOnInit(){this.storageService.get(O.u.AUTH).then(n=>{this.apiKey=n.apiKey}),this.storageService.get(O.u.DELIVER_ROUTE).then(n=>{this.deliveredStatus=n}),c.isSupported().then(n=>{this.isSupported=n.supported}),c.removeAllListeners().then(()=>{c.addListener("googleBarcodeScannerModuleInstallProgress",n=>{this.ngZone.run(()=>{})})}),this.isGoogleBarcodeScannerModuleAvailable()}IonViewWillEnter(){this.scan()}presentLoading(){var n=this;return(0,o.A)(function*(){n.isLoading=!0,yield(yield n.loadingController.create({spinner:"bubbles",message:"Processing request...",duration:5e3})).present()})()}installGoogleBarcodeScannerModule(){return(0,o.A)(function*(){yield c.installGoogleBarcodeScannerModule()})()}isGoogleBarcodeScannerModuleAvailable(){var n=this;return(0,o.A)(function*(){n.isSupported&&(n.checkgooglemodule=yield c.isGoogleBarcodeScannerModuleAvailable())})()}scan(){var n=this;return(0,o.A)(function*(){if(!(yield n.requestPermissions()))return void n.presentAlert();const{barcodes:i}=yield c.scan();n.barcodes.push(...i),n.presentLoading(),n.trackShipment(i[0].rawValue)})()}requestPermissions(){return(0,o.A)(function*(){const{camera:n}=yield c.requestPermissions();return"granted"===n||"limited"===n})()}presentAlert(){var n=this;return(0,o.A)(function*(){yield(yield n.alertController.create({header:"Permission denied",message:"Please grant camera permission to use the barcode scanner.",buttons:["OK"]})).present()})()}trackShipment(n){this.scanStatus=!0,this.message="",this.shipmentService.trackShipment(this.apiKey,{track:n}).subscribe({next:i=>{this.scanStatus=!1,0!=i.length?this.deliveredStatus!==i[0].wpcargo_status.toLowerCase()?this.router.navigate(["./home/shipment/"+i[0].ID]):this.router.navigate(["./home/view/"+i[0].ID]):this.message="Shipment Number "+n+" not Found"},error:i=>{let h="Network Issue. ";h+=i.error.message,this.message=h}})}static{this.\u0275fac=function(r){return new(r||e)(t.rXU(a.hG),t.rXU(t.SKi),t.rXU(u.Ix),t.rXU(f.o),t.rXU(A.n),t.rXU(a.Xi))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-scanner"]],decls:13,vars:3,consts:[["id","dark_backgrounded",1,"ion-no-border",3,"translucent"],["color","clear"],["slot","secondary",2,"width","100%"],["color","primary"],["id","app-logo","src","../../assets/images/logo.png","alt","Site Logo","height","35px",1,"inner-page"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click","disabled"],["name","scan"],[1,"lessons-list"],["expand","block",3,"click","disabled"]],template:function(r,i){1&r&&(t.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),t.nrm(3,"ion-menu-button",3),t.j41(4,"ion-title",3),t.nrm(5,"img",4),t.k0s()()()(),t.j41(6,"ion-content")(7,"ion-fab",5)(8,"ion-fab-button",6),t.bIt("click",function(){return i.scan()}),t.nrm(9,"ion-icon",7),t.k0s()(),t.j41(10,"div",8)(11,"ion-button",9),t.bIt("click",function(){return i.installGoogleBarcodeScannerModule()}),t.EFF(12,"Install Google Barcode Scanner Module"),t.k0s()()()),2&r&&(t.Y8G("translucent",!0),t.R7$(8),t.Y8G("disabled",!i.isSupported),t.R7$(3),t.Y8G("disabled",!i.isSupported))},dependencies:[a.Jm,a.QW,a.W9,a.Q8,a.YW,a.eU,a.iq,a.MC,a.BC,a.ai]})}}return e})()}];let D=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(C),u.iI]})}}return e})(),L=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[d.MD,g.YN,a.bv,D]})}}return e})()}}]);