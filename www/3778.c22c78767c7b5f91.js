"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3778],{3778:(U,u,r)=>{r.r(u),r.d(u,{CancelledPageModule:()=>y});var g=r(177),d=r(9417),a=r(9893),h=r(9315),m=r(467),c=r(8199),e=r(4438),f=r(7291),_=r(8176),v=r(4796),F=r(7990);function S(i,o){if(1&i&&(e.j41(0,"p",45),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t["wpc-pm-description"])}}function I(i,o){1&i&&(e.j41(0,"p",45),e.EFF(1,"No description for this item"),e.k0s())}function C(i,o){if(1&i&&(e.j41(0,"p",45),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t["wpc-pm-weight"]," Lbs")}}function E(i,o){1&i&&(e.j41(0,"p",45),e.EFF(1,"1 Lbs"),e.k0s())}function b(i,o){if(1&i&&(e.j41(0,"p",45),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t["wpc-pm-value"]," JMD")}}function R(i,o){1&i&&(e.j41(0,"p",45),e.EFF(1,"0.00 JMD"),e.k0s())}function k(i,o){if(1&i&&(e.j41(0,"p",45),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t["wpc-pm-qty"])}}function w(i,o){1&i&&(e.j41(0,"p",45),e.EFF(1,"1"),e.k0s())}function j(i,o){if(1&i&&(e.j41(0,"div",37)(1,"p",38),e.EFF(2,"Item Description"),e.k0s(),e.DNE(3,S,2,1,"p",39)(4,I,2,0,"p",39),e.j41(5,"div",40)(6,"div",41),e.nrm(7,"img",42),e.DNE(8,C,2,1,"p",39)(9,E,2,0,"p",39),e.k0s(),e.j41(10,"div",41),e.nrm(11,"img",43),e.DNE(12,b,2,1,"p",39)(13,R,2,0,"p",39),e.k0s(),e.j41(14,"div",41),e.nrm(15,"img",44),e.DNE(16,k,2,1,"p",39)(17,w,2,0,"p",39),e.k0s()()()),2&i){const t=o.$implicit;e.R7$(3),e.Y8G("ngIf",t["wpc-pm-description"]),e.R7$(),e.Y8G("ngIf",!t["wpc-pm-description"]),e.R7$(4),e.Y8G("ngIf",t["wpc-pm-weight"]),e.R7$(),e.Y8G("ngIf",!t["wpc-pm-weight"]),e.R7$(3),e.Y8G("ngIf",t["wpc-pm-value"]),e.R7$(),e.Y8G("ngIf",!t["wpc-pm-value"]),e.R7$(3),e.Y8G("ngIf",t["wpc-pm-description"]),e.R7$(),e.Y8G("ngIf",!t["wpc-pm-description"])}}function T(i,o){if(1&i&&(e.j41(0,"section",18)(1,"ion-grid",19)(2,"ion-row",20)(3,"ion-col",21)(4,"h5",22),e.EFF(5),e.k0s()(),e.j41(6,"ion-col",23)(7,"ion-col",10)(8,"ion-button",24),e.EFF(9),e.k0s()()()(),e.j41(10,"ion-row",25)(11,"ion-col",26)(12,"p",27),e.EFF(13),e.k0s()(),e.j41(14,"ion-col",28)(15,"p",29),e.EFF(16,"JUN 05, 2024"),e.k0s()()(),e.j41(17,"ion-row",30)(18,"ion-col",26)(19,"p",31),e.EFF(20),e.k0s(),e.j41(21,"p",31),e.EFF(22),e.k0s()(),e.j41(23,"ion-col",28)(24,"div",32)(25,"ion-button",33),e.EFF(26,"View"),e.k0s()()()(),e.j41(27,"ion-row",34)(28,"ion-col",35),e.DNE(29,j,18,8,"div",36),e.k0s()()()()),2&i){const t=o.$implicit;e.R7$(5),e.JRh(t.shipment_number),e.R7$(4),e.JRh(t.wpcargo_status),e.R7$(4),e.JRh(t.wpcargo_receiver_name),e.R7$(7),e.JRh(t.wpcargo_receiver_phone),e.R7$(2),e.JRh(t.wpcargo_receiver_address),e.R7$(7),e.Y8G("ngForOf",t.shipment_packages)}}function x(i,o){1&i&&(e.j41(0,"div",46)(1,"ion-text",47),e.nrm(2,"ion-icon",48),e.EFF(3," Seaching Shipment... "),e.k0s()())}function $(i,o){1&i&&(e.j41(0,"div",49)(1,"ion-text",50),e.nrm(2,"ion-icon",51),e.EFF(3," No result Found. "),e.k0s()())}function P(i,o){if(1&i){const t=e.RV6();e.j41(0,"ion-infinite-scroll",52),e.bIt("ionInfinite",function(s){e.eBV(t);const l=e.XpG();return e.Njj(l.loadData(s))}),e.nrm(1,"ion-infinite-scroll-content",53),e.k0s()}}const D=[{path:"",component:(()=>{class i{constructor(t,n,s,l,p,N){this.storageService=t,this.shipmentService=n,this.auth=s,this.router=l,this.toasterService=p,this.loadingController=N,this.status="cancelled",this.search="",this.stateFlag=!1,this.loadFlag=!1,this.searchingFlag=!1,this.noResultFlag=!1,this.isSettingsSetup=!1}presentLoading(){var t=this;return(0,m.A)(function*(){yield(yield t.loadingController.create({spinner:"bubbles",message:"Please wait...",duration:6e3})).present()})()}ngOnInit(){}ionViewWillEnter(){this.storageService.get(c.u.STATUS).then(t=>{this.isSettingsSetup=!0}),this.auth.userData$.subscribe(t=>{t.apiKey&&(this.authUser=t,this.shipmentService.getPODSettings(t.apiKey).subscribe(n=>{const{unrequired:s=[]}=n;this.page=1,this.storageService.set(c.u.STATUS,n.status),this.storageService.set(c.u.DELIVER_ROUTE,n.route.delivered),this.storageService.set(c.u.CANCELLED_ROUTE,n.route.cancelled),this.storageService.set(c.u.SHIPPER_FIELDS,n.fields.shipper),this.storageService.set(c.u.RECEIVER_FIELDS,n.fields.receiver),this.storageService.set(c.u.UNREQUIRED_FIELDS,s),this.storageService.set(c.u.SIGN_FIELDS,n.sign_fields)},n=>{let s="Network Issue. ";s+=n.error.message,this.toasterService.presentToast(s,"danger",6e3)}))}),this.search="",this.shipments=[],this.allShipments()}setShipments(){this.shipmentService.userShipments$.subscribe(t=>{t.length&&(this.shipments=t)})}viewDetails(t){this.router.navigate(["./home/view/"+t])}loadData(t){this.page++,setTimeout(()=>{this.shipmentService.pageByStatus(this.authUser.apiKey,this.page,this.status).subscribe({next:n=>{if(!n)return t.target.complete(),void(t.target.disabled=!0);for(const[s,l]of Object.entries(n))this.shipments.push(l);t.target.complete()},error:n=>{t.target.complete(),t.target.disabled=!0,this.toasterService.presentToast("No more data to load.","danger",6e3)}})},500)}onSearchShipment(){this.loadFlag=!1,this.searchShipments()}onInput(){this.onClear()}onClear(){this.allShipments()}allShipments(){this.presentLoading(),this.searchingFlag=!0,this.noResultFlag=!1,this.loadFlag=!1,this.shipmentService.getShipmentByStatus(this.authUser.apiKey,this.status).subscribe(t=>{this.page=1,this.searchingFlag=!1,0==t.length?this.noResultFlag=!0:this.loadFlag=!0,this.shipments=t,this.loadingController.dismiss()},t=>{let n="Network Issue. ";n+=t.error.message,this.toasterService.presentToast(n,"danger",6e3)})}searchShipments(){this.presentLoading();let t={search:"",status:""};this.searchingFlag=!0,t.search=this.search.trim(),t.status="all",this.shipmentService.searchShipment(this.authUser.apiKey,t).subscribe({next:n=>{this.searchingFlag=!1,0==n.length&&(this.noResultFlag=!0),this.shipments=n,this.loadingController.dismiss()},error:n=>{let s="Network Issue. ";s+=n.error.message,this.toasterService.presentToast(s,"danger",6e3)}})}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(f.n),e.rXU(_.o),e.rXU(v.u),e.rXU(h.Ix),e.rXU(F.W),e.rXU(a.Xi))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-cancelled"]],decls:27,vars:6,consts:[["id","dark_backgrounded",3,"translucent"],["color","clear"],["slot","secondary",2,"width","100%"],["routerLink","/home/accounts"],["src","../../../assets/images/logout.png","alt","Site Logo",1,"logout"],["debounce","500","color","light","placeholder","Search Shipment","showCancelButton","never",1,"custom-search",3,"search","ionClear","ionInput","ngModelChange","ngModel"],[1,"ion-margin"],["id","content-inner"],[1,"dark-blue","ion-text-start","title","ion-margin"],[1,"main-page"],["size","4",1,"ion-text-center"],["shape","default","routerLink","/home/shipments",1,"wpc-button-sm-blue","ion-text-uppercase"],["shape","default","routerLink","/home/cancelled",1,"wpc-button-sm-green","ion-text-uppercase"],["shape","default","routerLink","/home/delivered",1,"wpc-button-sm-blue","ion-text-uppercase"],["class","inner-list","lines","full",4,"ngFor","ngForOf"],["class","ion-text-center ion-margin-vertical",4,"ngIf"],["class","ion-text-center ion-margin-vertical no-result-found",4,"ngIf"],["threshold","100px","class","ion-padding-top",3,"ionInfinite",4,"ngIf"],["lines","full",1,"inner-list"],[1,"grid-with-background","ion-no-padding"],[1,"row-with-background","ion-align-items-center"],["size","8"],[1,"white","ion-text-uppercase"],["size","4",1,"ion-text-right"],["shape","default","size","small",1,"wpc-button-sm-light","ion-text-uppercase"],[1,"ion-align-items-center","padded-row"],["size","7"],[1,"text-large","ion-text-uppercase"],["size","5",1,"ion-text-right"],[1,"text-large"],[1,"ion-align-items-start","padded-row"],[1,"text-small"],[1,"inner-buttons"],["shape","default","size","small",1,"wpc-button-sm-green","ion-text-uppercase"],[1,"padded-row"],["size","10",1,"light-blue-indented"],["class","package-fields",4,"ngFor","ngForOf"],[1,"package-fields"],[1,"label-sm-bold"],["class","label-sm-indented",4,"ngIf"],[1,"parcel-details"],[1,"item-detail"],["src","../../../assets/images/weight-loss.png","alt","Item icon",1,"item-icon"],["src","../../../assets/images/money.png","alt","Item icon",1,"item-icon"],["src","../../../assets/images/quality.png","alt","Item icon",1,"item-icon"],[1,"label-sm-indented"],[1,"ion-text-center","ion-margin-vertical"],["color","warning"],["name","hourglass-outline"],[1,"ion-text-center","ion-margin-vertical","no-result-found"],["color","danger","large",""],["name","warning",2,"font-size","18px"],["threshold","100px",1,"ion-padding-top",3,"ionInfinite"],["loadingSpinner","crescent","loadingText","Loading more shipments"]],template:function(n,s){1&n&&(e.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),e.nrm(4,"img",4),e.k0s(),e.j41(5,"ion-searchbar",5),e.bIt("search",function(){return s.onSearchShipment()})("ionClear",function(){return s.onClear()})("ionInput",function(){return s.onInput()}),e.mxI("ngModelChange",function(p){return e.DH7(s.search,p)||(s.search=p),p}),e.k0s()()()(),e.j41(6,"ion-content",6)(7,"div",7)(8,"ion-text",1)(9,"h1",8),e.EFF(10,"SHIPMENTS"),e.k0s()(),e.j41(11,"section",9)(12,"ion-grid")(13,"ion-row")(14,"ion-col",10)(15,"ion-button",11),e.EFF(16,"Active"),e.k0s()(),e.j41(17,"ion-col",10)(18,"ion-button",12),e.EFF(19,"Cancelled"),e.k0s()(),e.j41(20,"ion-col",10)(21,"ion-button",13),e.EFF(22,"Delivered"),e.k0s()()()(),e.DNE(23,T,30,6,"section",14),e.k0s(),e.DNE(24,x,4,0,"div",15)(25,$,4,0,"div",16)(26,P,2,0,"ion-infinite-scroll",17),e.k0s()()),2&n&&(e.Y8G("translucent",!0),e.R7$(5),e.R50("ngModel",s.search),e.R7$(18),e.Y8G("ngForOf",s.shipments),e.R7$(),e.Y8G("ngIf",s.searchingFlag),e.R7$(),e.Y8G("ngIf",s.noResultFlag),e.R7$(),e.Y8G("ngIf",!s.searchingFlag&&!s.searchedList))},dependencies:[g.Sq,g.bT,d.BC,d.vS,a.Jm,a.QW,a.hU,a.W9,a.lO,a.eU,a.iq,a.Ax,a.Hp,a.ln,a.S1,a.IO,a.ai,a.Gw,a.N7,h.Wk]})}}return i})()}];let G=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(D),h.iI]})}}return i})(),y=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[g.MD,d.YN,a.bv,G]})}}return i})()}}]);