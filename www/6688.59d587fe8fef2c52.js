"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(P,d,o)=>{o.r(d),o.d(d,{LoginPageModule:()=>D});var p=o(177),l=o(9417),a=o(9893),c=o(9315),u=o(467),m=o(8199),h=o(8254),e=o(4438),f=o(4796),v=o(7291),M=o(7990);const w=[{path:"",component:(()=>{class i{constructor(s,t,n,g,r){this.router=s,this.authService=t,this.storageService=n,this.loadingController=g,this.toasterService=r,this.postData={username:"",password:""},this.errorMessage=""}presentLoading(){var s=this;return(0,u.A)(function*(){yield(yield s.loadingController.create({spinner:"bubbles",message:"Please wait...",duration:6e3})).present()})()}validateInputs(){let s=this.postData.username.trim(),t=this.postData.password.trim();return this.postData.username&&this.postData.password&&s.length>0&&t.length>0}ngOnInit(){}loginAction(){this.validateInputs()?(this.presentLoading(),this.authService.login(this.postData).subscribe({next:s=>{if("error"!=s.type){let t=s.user.role_slugs||[];if(t&&Array.isArray(t)&&!t.includes("wpcargo_driver"))return void this.toasterService.presentToast("Not enough permission. Please try again.","danger");const n=s.user;n.apiKey=s.api,h.p.set({key:m.u.AUTH,value:JSON.stringify(n)}).then(g=>{this.router.navigate(["/home"])})}else this.errorMessage=s.message,this.errorMessage="Login failed: Invalid username or password.",this.toasterService.presentToast(this.errorMessage,"danger");this.loadingController.dismiss()},error:s=>{let n="Network Issue. ";n+="Unknown Error"===s.error.statusText?"Please enter email/username or password.":s.error.message,this.errorMessage=n,this.toasterService.presentToast(this.errorMessage,"danger",6e3)}})):(this.errorMessage="Please enter email/username or password.",this.toasterService.presentToast(this.errorMessage,"danger",6e3))}static{this.\u0275fac=function(t){return new(t||i)(e.rXU(c.Ix),e.rXU(f.u),e.rXU(v.n),e.rXU(a.Xi),e.rXU(M.W))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-login"]],decls:26,vars:2,consts:[["padding","true",1,"welcome-text-main"],["id","content-wrapper full-height-center"],["id","logo-with-text"],["src","../../../assets/images/logo-white.png","alt","kde-truck"],[1,"welcome-text-main"],[1,"smaller-text","ion-text-center"],["id","section-main-content"],[1,"underlined"],[1,"ion-no-padding","ion-align-items-center"],["size","1",1,"ion-no-padding"],["src","../../../assets/images/email.png","alt","icon",1,"input-icon"],["size","11",1,"ion-no-padding"],["autocomplete","off","type","text","placeholder","Username or Email","name","username",3,"ngModelChange","ngModel"],["src","../../../assets/images/padlock.png","alt","icon",1,"input-icon"],["autocomplete","off","type","password","placeholder","Password","name","password",3,"ngModelChange","ngModel"],["size","12",1,"ion-text-center"],["fill","solid","expand","full",1,"wpc-button-green","ion-text-uppercase",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"div",2),e.nrm(3,"img",3),e.k0s(),e.j41(4,"div",4)(5,"h1",5),e.EFF(6,"Welcome Back"),e.k0s(),e.j41(7,"section",6)(8,"form")(9,"ion-grid",7)(10,"ion-row",8)(11,"ion-col",9),e.nrm(12,"img",10),e.k0s(),e.j41(13,"ion-col",11)(14,"ion-input",12),e.mxI("ngModelChange",function(r){return e.DH7(n.postData.username,r)||(n.postData.username=r),r}),e.k0s()()()(),e.j41(15,"ion-grid",7)(16,"ion-row",8)(17,"ion-col",9),e.nrm(18,"img",13),e.k0s(),e.j41(19,"ion-col",11)(20,"ion-input",14),e.mxI("ngModelChange",function(r){return e.DH7(n.postData.password,r)||(n.postData.password=r),r}),e.k0s()()()(),e.j41(21,"ion-grid")(22,"ion-row")(23,"ion-col",15)(24,"ion-button",16),e.bIt("click",function(){return n.loginAction()}),e.EFF(25,"LOGIN"),e.k0s()()()()()()()()()),2&t&&(e.R7$(14),e.R50("ngModel",n.postData.username),e.R7$(6),e.R50("ngModel",n.postData.password))},dependencies:[l.qT,l.BC,l.cb,l.vS,l.cV,a.Jm,a.hU,a.W9,a.lO,a.$w,a.ln,a.Gw],styles:["#content-wrapper[_ngcontent-%COMP%]{margin:0 -50% 0 0;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]})}}return i})()}];let y=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[c.iI.forChild(w),c.iI]})}}return i})();var C=o(5553);let D=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[p.MD,l.YN,a.bv,C.h,y]})}}return i})()}}]);